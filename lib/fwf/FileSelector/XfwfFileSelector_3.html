<!-- manual page source format generated by RosettaMan v2.5a4, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->
<HTML>
<HEAD>
<TITLE>FileSelector</TITLE>
</HEAD>
<BODY>
<A HREF="#toc">Table of Contents</A><P>

<H2><A NAME="sect1" HREF="#toc1">Name</A></H2>

FileSelector - A Hierarchical File Selector Widget
<P>

<H2><A NAME="sect2" HREF="#toc2"><B>Synopsis</B></A></H2>

#include &lt;X11/Intrinsic.h&gt; #include &lt;X11/FileSel.h&gt;
<P>
widget = XtCreatePopupShell(name, fileSelectorWidgetClass,
...);
<P>

<H2><A NAME="sect3" HREF="#toc3"><B>Class</B> <B>Hierarchy</B></A></H2>

Core--&gt;Composite--&gt;XfwfFileSelector
<P>

<H2><A NAME="sect4" HREF="#toc4"><B>Description</B></A></H2>

XfwfFileSelector is a hierarchical file selector widget that
allows a user to move through the directory tree and select
files.
<P>
This widget can either be used as a stand-alone widget with
it own OK and Cancel buttons, or as part of a larger widget.
When used as part of a larger composite widget, the OK and
Cancel buttons can be turned off and replaced by global ter­
mination buttons for the larger widget.
<P>
The File Selector has two scrolled text lists side by side.
The left list contains the current directory path from the
root to the current directory, listed one directory per
line. The right list shows the files in the current direc­
tory that pass a user-specified filter function, and are
sorted by a user specified sorting order. Files can be
selected by typing them in by clicking on the appropriate
file in the right list. Clicking on a directory will enter
that directory and list its files and directories.
<P>
The source code in the Dir directory of the FWF distribution
contains system-independent file listing functions that are
required by FileSelector.
<P>

<H2><A NAME="sect5" HREF="#toc5"><B>Resources</B></A></H2>

In addition to the resources defined by superclasses, this
widget defines the following:<BR>

<DL>
<DT><B>Name</B> <DD>                        <B>Class</B>        <B>Type</B>        <B>Default</B>
</DD>
</DL>
<DL>
<DT><B>XtNwidth</B> <DD>                    Width        Dimension 500
</DD>
</DL>
<DL>
<DT><B>XtNheight</B> <DD>                   Height       Dimension 250
</DD>
</DL>
<DL>
<DT><B>XtNbackground</B> <DD>               Background Pixel       &quot;white"
</DD>
</DL>
<DL>
<DT><B>XtNokButtonCallback</B> <DD>         Callback     Callback    NULL
<B>XtNcancelButtonCallback</B>      Callback     Callback    NULL
<B>XtNselectionChangeCallback</B> Callback     Callback    NULL
</DD>
</DL>
<DL>
<DT><B>XtNshowOkButton</B> <DD>             Boolean      Boolean     True
</DD>
</DL>
<DL>
<DT><B>XtNshowCancelButton</B> <DD>         Boolean      Boolean     True
</DD>
</DL>
<DL>
<DT><B>XtNflagLinks</B> <DD>                Boolean      Boolean     False
</DD>
</DL>
<DL>
<DT><B>XtNcheckExistence</B> <DD>           Boolean      Boolean     True
</DD>
</DL>
<DL>
<DT><B>XtNfileSelected</B> <DD>             Boolean      Boolean     False
<P>
</DD>
</DL>
<DL>
<DT><B>XtNcurrentDirectory</B> <DD>         Pathname     String      NULL
</DD>
</DL>
<DL>
<DT><B>XtNcurrentFile</B> <DD>              Filename     String      NULL
</DD>
</DL>
<DL>
<DT><B>XtNtitle</B> <DD>                    Label        String      &quot;File Selector"
</DD>
</DL>
<DL>
<DT><B>XtNsortMode</B> <DD>                 Value        Int         2
</DD>
</DL>
<DL>
<DT><B>XtNpattern</B> <DD>                  File         String      NULL
<P>
</DD>
</DL>
The XtNokButtonCallback, NcancelButtonCallback, and XtNse­
lectionChangeCallback callback resources are used to specify
any functions to be called when the OK button is pressed,
the Cancel button is pressed, or a new item is selected.
The OK and Cancel buttons can be enabled or disabled by
changing the XtNshowOkButton, and XtNshowCancelButton
resources. The buttons are typically disabled when the file
selector is included in a parent widget.
<P>
The XtNflagLinks resource allows symbolic links to be spe­
cially identified with an `@' sign after the file name.
This identification is only done if XtNflagLinks is true.
<P>
The XtNcheckExistence resource determines whether file names
have to exist before they can be selected. Typically this
resource is set to True when searching for a file to read or
modify, but set to False if the user should be able to enter
new file names.
<P>
XtNfileSelected is a read only resource which indicates if a
file is currently selected. XtNcurrentDirectory and XtNcur­
rentFile allow the current path and file name to be speci­
fied. The title of the file selector is specified via
XtNtitle.
<P>
The filter pattern is specified in the string XtNpattern.
The method used to sort the file list is specified in
XtNsortMode. The sort mode is encoded as an integer. The
integers are defined in the DirMgr.h file which is part of
the libDir directory management package included in the FWF
release. Sample XtNsortMode values are depicted below:
<P>
<DL>
<DT><B>XtNsortMode</B> <B>Name</B> <DD>                <B>Value</B> <B>Sort</B> <B>By</B>
</DD>
</DL>
<DL>
<DT><B>DIR_MGR_SORT_NONE</B> <DD>               0       No sorting
</DD>
</DL>
<DL>
<DT><B>DIR_MGR_SORT_NAME</B> <DD>               1       File name
</DD>
</DL>
<DL>
<DT><B>DIR_MGR_SORT_NAME_DIRS_FIRST</B> <DD>    2       File name, directories first
</DD>
</DL>
<DL>
<DT><B>DIR_MGR_SORT_SIZE_ASCENDING</B> <DD>     3       Ascending file size
</DD>
</DL>
<DL>
<DT><B>DIR_MGR_SORT_SIZE_DESCENDING</B> <DD>    4       Descending file size
<B>DIR_MGR_SORT_ACCESS_ASCENDING</B>    5       Ascending access time
<B>DIR_MGR_SORT_ACCESS_DESCENDING</B> 6       Descending access time
<P>
</DD>
</DL>

<H2><A NAME="sect6" HREF="#toc6"><B>Callbacks</B></A></H2>

Three callbacks are supported by the FileSelector widget.
The first two, okButtonCallback and cancelButtonCallback are
called when the FileSelector OK or Cancel buttons are
pressed. The final callback, selectionChangeCallback,
occurs whenever the currently selected file changes, and can
be used to update the sensitivity of user buttons, etc. The
cancelButtonCallback returns no data. The other two call­
backs notify the user of data through the data structures
described below:
<P>
typedef struct _XfwfFileSelectorOkButtonReturnStruct
{<BR>

char *path;<BR>

char *file;<BR>

char *file_box_text;<BR>

} XfwfFileSelectorOkButtonReturnStruct;
<P>
typedef struct _XfwfFileSelectorSelectionChangeReturnStruct
{<BR>

Boolean file_selected;<BR>

char *path;<BR>

char *file;<BR>

} XfwfFileSelectorSelectionChangeReturnStruct;
<P>

<H2><A NAME="sect7" HREF="#toc7"><B>Public</B> <B>Functions</B></A></H2>

void XfwfFileSelectorChangeDirectory(fsw,dir)
XfwfFileSelectorWidget fsw;<BR>

char *dir;
<P>
This routine changes the current directory of the File
Selector widget &lt;fsw&gt; to be the directory &lt;dir&gt;.
<P>
void XfwfFileSelectorRefresh(fsw)<BR>

XfwfFileSelectorWidget fsw;
<P>
This routine causes the FileSelector widget to re-read
the current directory, refreshing the widget. Changes
to the file system will not automatically propogate to
the widget. This routine forces the refresh.
<P>
void XfwfFileSelectorGetStatus(fsw,ssp)<BR>

XfwfFileSelectorWidget fsw;<BR>

XfwfFileSelectorStatusStruct *ssp;
<P>
This routine obtains current information form the File­
Selector widget pertaining to the selection state of
the widget. The structure pointed to by &lt;ssp&gt; is
filled in with the currently selected file and direc­
tory, as well as the current contents of the file box
text. This routine allows status information to be
queried from the widget at any time. The structure
&lt;ssp&gt; which is passed into the routine is described
below:
<P>
typedef struct _XfwfFileSelectorStatusStruct
{<BR>

Boolean file_selected;
char *path;
char *file;
char *file_box_text;
} XfwfFileSelectorStatusStruct;
<P>

<H2><A NAME="sect8" HREF="#toc8"><B>Restrictions</B></A></H2>

The filter function is currently limited to shell-style pat­
tern matching, even though the underlying directory managem­
net functions support arbitrary filter functions. The chil­
dren widgets of the FileSelector can not be configured by
the user. The layout semantics of the widget are not always
pretty. We should be able to add new buttons to the widget.
Not all resources can be changed dynamically. The slider
bars of the viewports do not &quot;snap back&quot; when a smaller
directory is loaded, and the sliders are down at the bottom.
<P>

<H2><A NAME="sect9" HREF="#toc9"><B>Author</B></A></H2>

Brian Totty, <I>totty@cs.uiuc.edu</I><BR>

Department of Computer Science,<BR>

University of Illinois at Urbana-Champaign
1304 W. Springfield Avenue<BR>

Urbana, IL 61801
<P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Synopsis</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Class Hierarchy</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Description</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Resources</A></LI>
<LI><A NAME="toc5" HREF="#sect5">Callbacks</A></LI>
<LI><A NAME="toc6" HREF="#sect6">Public Functions</A></LI>
<LI><A NAME="toc7" HREF="#sect7">Restrictions</A></LI>
<LI><A NAME="toc8" HREF="#sect8">Author</A></LI>
</UL>
</BODY></HTML>
