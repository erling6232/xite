<!-- manual page source format generated by RosettaMan v2.5a4, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->
<HTML>
<HEAD>
<TITLE>Prompt</TITLE>
</HEAD>
<BODY>
<A HREF="#toc">Table of Contents</A><P>

<H2><A NAME="sect1" HREF="#toc1">NAME</A></H2>

XfwfPrompt
<P>

<H2><A NAME="sect2" HREF="#toc2"><B>DESCRIPTION</B></A></H2>

The Prompt widget is used for short (no more than a few
lines) text entry. It can be used in two modes: either with
or without a template. If there is a template, input will
be checked against it and only accepted if it matches. A
template must be accompanied by a pattern, that gives the
acceptable character classes for each position in the tem­
plate. A template can include literal characters, e.g.,
<I>&quot;Enter</I> <I>date:</I> <B>__-__-__</B> <I>(DD-MM-YY)&quot;</I> with pattern <I>&quot;99-99-99"</I>
means that the user may enter only digits on the `<B>_</B>' posi­
tions.
<P>
If the pattern and template do not provide enough valida­
tion, or if there is no template, there is also the possi­
bility of using a callback after each character is entered.
The callback can accept or reject the new text.
<P>
The <I>rvStart</I> resource is used as cursor position.
<P>
<B>Public</B> <B>variables</B><BR>

______________________________________________________
<DL>
<DT><B>|</B> <DD>                     <B>XfwfPrompt</B>
</DD>
</DL>
<DL>
<DT>| <B>Name</B> <DD>         <B>|</B> <B>Class</B>         <B>|</B> <B>Type</B>    <B>|</B> <B>Default</B>
</DD>
</DL>
<DL>
<DT>| XtNtext <DD>      | XtCText       | String | NULL
| XtNtemplate | XtCTemplate | String | NULL
| XtNpattern    | XtCPattern    | String | NULL
| XtNvalidate | XtCValidate | Callback| NULL
</DD>
</DL>
<DL>
<DT>| XtNleave <DD>     | XtCLeave      | Callback| NULL
| XtNactivate | XtCActivate | Callback| NULL
| XtNcomplete | XtCComplete | Boolean | True
| XtNplaceholder| XtCPlaceholder| char    | `_'
</DD>
</DL>
<DL>
<DT>| <DD>              |                |          |
|_______________<I>|</I>________________<I>|</I>__________<I>|</I>_________</I>
<P>
</DD>
</DL>
<I>XtNtext</I><BR>

The <I>text</I> resource is what is modified by the user. If
there is a template defined, the text will be the por­
tion of the template from the first `<B>_</B>' to the last.
<P>
<I>XtNtemplate</I><BR>

The <I>template</I> consists of text with at least one `<B>_</B>'
(or, to be precise, the value of <I>placeholder</I>). If there
is no template, input of any length is accepted (but
see the <I>validate</I> callback below).
<P>
Note that the <I>label</I> resource that is inherited from
<I>XfwfLabel</I> is used to hold the combination of <I>template</I>
and <I>text</I>. Setting <I>label</I> has no effect, and, indeed,
will cause a warning message to be printed.
<P>
<I>XtNpattern</I><BR>

The <I>pattern</I> is only used if there is a <I>template</I>. The
length of the <I>pattern</I> must be the length from the first
`<B>_</B>' in <I>template</I> to the last. Where the <I>template</I> has a
`<B>_</B>', the <I>pattern</I> must have one of:
<P>
* `9' only digits are allowed.
<P>
* `a' digits, upper- and lowercase letters and spaces.
<P>
* `A' digits, uppercase letters and spaces.
<P>
* `F' only `safe' file name characters.
<P>
* `f' file name character plus `*' `[', `]' and `?'
<P>
* `X' any character.
<P>
* `z' digits, upper- and lowercase letters (no spaces)
<P>
* `Z' digits, uppercase letters (no spaces).
<P>
If the pattern is empty or too short, it will be
extended with X's.
<P>
<I>XtNvalidate</I><BR>

The <I>validate</I> callbacks are called when the text
changes, because a letter is added or removed. The
callback get a pointer to an <I>XfwfPromptInfo</I> structure
as <I>call_data</I>. The structure includes a field <I>reply</I>,
which should be set to <I>XfwfReject</I>, <I>XfwfAccept</I> or <I>Xfwf­</I>
<I>Complete</I>. The first causes the new text to be rejected
with a `beep'; the second sets the <I>complete</I> resource to
<I>False</I>, to indicate that the text is valid, but not yet
complete; the third sets the <I>complete</I> resource to <I>True</I>.
<P>
<I>XtNleave</I><BR>

The <I>leave</I> callback is called when the focus leaves the
prompt widget. This is usually a sign that the user is
ready entering the text. The final text is passed in
the <I>call_data</I> argument.
<P>
<I>XtNactivate</I><BR>

The <I>activate</I> callback is invoked from the <I>activate</I>
action, which is normally bound to the Return key. The
<I>call_data</I> argument of the callbacks routines is filled
with a pointer to the event that triggered the action.
This callback can be used in a dialog box, for example,
to activate the default button.
<P>
<I>XtNcomplete</I><BR>

The resource <I>complete</I> is always <I>True</I>, unless the most
recent call to the <I>validate</I> callback returned <I>XfwfAc­</I>
<I>cept</I>.
<P>
<I>XtNplaceholder</I><BR>

The character thatis used as the placeholder can be
changed from the default `<B>_</B>' by setting the <I>placeholder</I>
resource. Note that this character will also be used in
the <I>text</I> string to indicate open places.
<P>
<I>XtNcursor</I><BR>

The cursor is by default a vertical bar, called the
`xterm' cursor.
<P>
<I>XtNtraversalOn</I><BR>

Since prompts, in contrast to labels, should receive
keyboard events, the <I>traversalOn</I> resource is by default
<P>
<I>True</I>.
<P>
<I>XtNframeWidth</I><BR>

The default frame width is also given a different
value.
<P>
<I>XtNframeType</I><BR>

As is the frame type
<P>
<I>XtNalignment</I><BR>

The default alignment of text is changed to centerleft.
<P>
_______________________________________________________________________
<B>|</B>                               <B>XfwfLabel</B>
| <B>Name</B>           <B>|</B> <B>Class</B>          <B>|</B> <B>Type</B>      <B>|</B> <B>Default</B>
| XtNlabel       | XtCLabel       | String    | NULL
| XtNtablist     | XtCTablist     | String    | NULL
| XtNfont        | XtCFont        | FontStruct| XtDefaultFont
| XtNforeground | XtCForeground | Pixel     | XtDefaultForeground
| XtNhlForeground| XtCHlForeground| Pixel     | XtDefaultForeground
| XtNalignment | XtCAlignment | Alignment | 0
| XtNtopMargin | XtCTopMargin | Dimension | 2
| XtNbottomMargin| XtCBottomMargin| Dimension | 2
| XtNleftMargin | XtCLeftMargin | Dimension | 2
| XtNrightMargin | XtCRightMargin | Dimension | 2
| XtNshrinkToFit | XtCShrinkToFit | Boolean | False
| XtNrvStart     | XtCRvStart     | Int       | 0
| XtNrvLength    | XtCRvLength    | Int       | 0
| XtNhlStart     | XtCHlStart     | Int       | 0
| XtNhlLength    | XtCHlLength    | Int       | 0
|                |                 |            |
|________________<I>|</I>_________________<I>|</I>____________<I>|</I>______________________</I>
<P>
<DL>
<DT>_____________________________________________________<DD>
</DD>
</DL>
<DL>
<DT><B>|</B> <DD>                     <B>XfwfBoard</B>
</DD>
</DL>
<DL>
<DT>| <B>Name</B> <DD>        <B>|</B> <B>Class</B>        <B>|</B> <B>Type</B>     <B>|</B> <B>Default</B>
</DD>
</DL>
<DL>
<DT>| XtNabs_x <DD>    | XtCAbs_x     | Position | 0
</DD>
</DL>
<DL>
<DT>| XtNrel_x <DD>    | XtCRel_x     | Float    | &quot;0.0"
</DD>
</DL>
<DL>
<DT>| XtNabs_y <DD>    | XtCAbs_y     | Position | 0
</DD>
</DL>
<DL>
<DT>| XtNrel_y <DD>    | XtCRel_y     | Float    | &quot;0.0"
| XtNabs_width | XtCAbs_width | Position | 0
| XtNrel_width | XtCRel_width | Float    | &quot;1.0"
| XtNabs_height| XtCAbs_height| Position | 0
| XtNrel_height| XtCRel_height| Float    | &quot;1.0"
</DD>
</DL>
<DL>
<DT>| XtNhunit <DD>    | XtCHunit     | Float    | &quot;1.0"
</DD>
</DL>
<DL>
<DT>| XtNvunit <DD>    | XtCVunit     | Float    | &quot;1.0"
| XtNlocation | XtCLocation | String | NULL
|              |               |           |
|______________<I>|</I>_______________<I>|</I>___________<I>|</I>_________</I>
<P>
</DD>
</DL>
________________________________________________________________________________________
<DL>
<DT><B>|</B> <DD>                                      <B>XfwfFrame</B>
| <B>Name</B>                  <B>|</B> <B>Class</B>                 <B>|</B> <B>Type</B>         <B>|</B> <B>Default</B>
| XtNcursor             | XtCCursor             | Cursor       | None
| XtNframeType          | XtCFrameType          | FrameType    | XfwfRaised
| XtNframeWidth         | XtCFrameWidth         | Dimension    | 0
| XtNouterOffset        | XtCOuterOffset        | Dimension    | 0
| XtNinnerOffset        | XtCInnerOffset        | Dimension    | 0
| XtNshadowScheme       | XtCShadowScheme       | ShadowScheme | XfwfAuto
| XtNtopShadowColor     | XtCTopShadowColor     | Pixel        | compute_topcolor
| XtNbottomShadowColor | XtCBottomShadowColor | Pixel        | compute_bottomcolor
| XtNtopShadowStipple | XtCTopShadowStipple | Bitmap       | NULL
| XtNbottomShadowStipple| XtCBottomShadowStipple| Bitmap       | NULL
|                       |                        |               |
|_______________________<I>|</I>________________________<I>|</I>_______________<I>|</I>______________________</I>
<P>
</DD>
</DL>
___________________________________________________________________________________
<DL>
<DT><B>|</B> <DD>                                   <B>XfwfCommon</B>
| <B>Name</B>                 <B>|</B> <B>Class</B>                <B>|</B> <B>Type</B>      <B>|</B> <B>Default</B>
| XtNtraversalOn       | XtCTraversalOn       | Boolean | True
| XtNhighlightThickness| XtCHighlightThickness| Dimension | 2
| XtNhighlightColor    | XtCHighlightColor    | Pixel     | XtDefaultForeground
| XtNhighlightPixmap | XtCHighlightPixmap | Pixmap    | None
| XtNnextTop           | XtCNextTop           | Callback | NULL
| XtNuserData          | XtCUserData          | Pointer | NULL
|                      |                       |            |
|______________________<I>|</I>_______________________<I>|</I>____________<I>|</I>______________________</I>
<P>
</DD>
</DL>
<DL>
<DT>_____________________________________________________________<DD>
<B>Composite</B>
<B>Name</B>             <B>Class</B>               <B>Type</B>           <B>Default</B>
XtNchildren      XtCChildren         WidgetList     NULL
insertPosition XtCInsertPosition XTOrderProc    NULL
numChildren      XtCNumChildren      Cardinal       0
<P>
</DD>
</DL>
<DL>
<DT>_____________________________________________________________<DD>
<B>|</B>               <B>|</B>                   <B>|</B>              <B>|</B>
___|<I>_</I>______________|<I>_</I>__________________|<I>_</I>_____________|<I>_</I>________|<I>_</I>____
<B>|</B> |               |             <B>Core</B> |              |         |
</DD>
</DL>
<DL>
<DT>| <B>Na</B>|<B>me</B>             <B>|</B>| <B>Class</B>             | <B>|</B> <B>Type</B>      |    <B>|</B> <B>De</B>|<B>fault</B><DD>
</DD>
</DL>
<DL>
<DT>| Xt|Nx <DD>            || XtCX              | | Position |    | 0 |
</DD>
</DL>
<DL>
<DT>| Xt|Ny <DD>            || XtCY              | | Position |    | 0 |
</DD>
</DL>
<DL>
<DT>| Xt|Nwidth <DD>        || XtCWidth          | | Dimension |    | 0 |
</DD>
</DL>
<DL>
<DT>| Xt|Nheight <DD>       || XtCHeight         | | Dimension |    | 0 |
</DD>
</DL>
<DL>
<DT>| bo|rderWidth <DD>     || XtCBorderWidth    | | Dimension |    | 0 |
</DD>
</DL>
<DL>
<DT>| Xt|Ncolormap <DD>     || XtCColormap       | | Colormap |    | NU|LL
</DD>
</DL>
<DL>
<DT>| Xt|Ndepth <DD>        || XtCDepth          | | Int       |    | 0 |
| de|stroyCallback || XtCDestroyCallback| | XTCallback|List | NU|LL
| Xt|Nsensitive     || XtCSensitive      | | Boolean |    | Tr|ue
</DD>
</DL>
<DL>
<DT>| Xt|Ntm <DD>           || XtCTm             | | XTTMRec |    | NU|LL
| an|cestorSensitive|| XtCAncestorSensiti|ve| Boolean |    | Fa|lse
| ac|celerators     || XtCAccelerators | | XTTranslat|ions | NU|LL
</DD>
</DL>
<DL>
<DT>| bo|rderColor <DD>     || XtCBorderColor    | | Pixel     |    | 0 |
| bo|rderPixmap     || XtCBorderPixmap | | Pixmap    |    | NU|LL
</DD>
</DL>
<DL>
<DT>| ba|ckground <DD>      || XtCBackground     | | Pixel     |    | 0 |
| ba|ckgroundPixmap || XtCBackgroundPixma|p | Pixmap    |    | NU|LL
| ma|ppedWhenManaged|| XtCMappedWhenManag|ed| Boolean |    | Tr|ue
</DD>
</DL>
<DL>
<DT>| Xt|Nscreen <DD>       || XtCScreen         | | Screen * |    | NU|LL
| |              ||                   | |            |    |    |
|___|<I>_</I>_____________<I>|</I>|<I>_</I>__________________|<I>_|</I>____________|<I>_</I>___<I>|</I>____|<I>_</I>___</I>
|               |                   |              |
|               |                   |              |
<B>Expo</B>|<B>rts</B>             |                   |              |
T|he <I>XfwfPromptIn</I>|f<I>_</I>o is what is passe|d to the <I>valida</I>|t<I>_</I>e call­
b|ack after the te|xt has changed. It c|ontains pointer|s to the
o|ld and the new t|ext and a boolean fi|eld <I>result</I> that|is ini­
t|ially set to <I>Xfw</I>|f<I>_Complete</I>, but that |may be changed |by the
c|allback routine|, when the new t|ext is unaccept|able, or
a|cceptable but no|t complete.         |              |
|               |                   |              |
|               |                   |              |
|               |                   |              |
|               |                   |              |
<B>t</B>|<B>ype</B>             |                   |              |
</DD>
</DL>
<DL>
<DT>|XfwfPromptInfoRe|sult = enum { <DD>      |              |
</DD>
</DL>
<DL>
<DT>| <DD>              |                   | XfwfReject,|XfwfAccep|t, XfwfComplete
|               |}                  |              |
|               |                   |              |
|               |                   |              |
<B>t</B>|<B>ype</B>             |                   |              |
</DD>
</DL>
<DL>
<DT>|XfwfPromptInfo =|struct { <DD>          |              |
</DD>
</DL>
<DL>
<DT>| <DD>                  | String olds|tring;
String newstring;
Boolean result;
}
<P>
</DD>
</DL>
<B>Translations</B><BR>

The traversal code is added, except for <I>&lt;Key&gt;Left:</I> <I>traverse­</I>
<I>Left()</I> and <I>&lt;Key&gt;Right:</I> <I>traverseRight()</I>, which are used for
other purposes.
<P>
&lt;FocusIn&gt;: focusIn()
<P>
&lt;FocusOut&gt;: leave() focusOut()
<P>
removed:<BR>

trans    &lt;Visible&gt;:                               visibil­
ity()
<P>
removed:<BR>

trans    &lt;Unmap&gt;:                                 unmap()
<P>
&lt;Key&gt;Up: traverseUp()
<P>
&lt;Key&gt;Down: traverseDown()
<P>
&lt;Key&gt;Next: traverseNext()
<P>
~Shift&lt;Key&gt;Tab: traverseNext()
<P>
&lt;Key&gt;Prior: traversePrev()
<P>
Shift&lt;Key&gt;Tab: traversePrev()
<P>
&lt;Key&gt;KP_Enter: traverseNextTop()
<P>
&lt;Key&gt;Home: traverseHome()
<P>
Shift&lt;Btn1Down&gt;: extend_select()
<P>
&lt;Btn1Down&gt;: traverseCurrent() start_select()
<P>
&lt;Btn1Motion&gt;: extend_select()
<P>
&lt;Btn1Up&gt;: end_select()
<P>
&lt;Btn2Down&gt;,&lt;Btn2Up&gt;: paste()
<P>
&lt;Key&gt;BackSpace: cut() backspace()
<P>
Ctrl&lt;Key&gt;d: cut() delete()
<P>
&lt;Key&gt;Right: unselect() right()
<P>
&lt;Key&gt;Left: unselect() left()
<P>
Ctrl&lt;Key&gt;a: unselect() bol()
<P>
Ctrl&lt;Key&gt;e: unselect() eol()
<P>
&lt;Key&gt;Return: activate()
<P>
&lt;Key&gt;: cut() self_insert()
<P>
<I>leave</I>
<P>
The <I>leave</I> action calls the <I>leave</I> callbacks with the
current <I>text</I> as <I>call_data</I>.
<P>
<I>start_select</I>
<P>
The <I>start_select</I> action sets the cursor position as
close as possible to the mouse position, but only if
the mouse actually points at some text. It also removes
any previous selection, preparing for a new one.
<P>
<I>extend_select</I>
<P>
The <I>extend_select</I> action extends the selection to the
current cursor position.
<P>
<I>end_select</I>
<P>
The <I>end_select</I> action copies the selected text to the
clipboard.
<P>
<I>paste</I>
<P>
The <I>paste</I> action requests the contents of the clipboard
in string-format and tries to insert it into the text.
<P>
<I>unselect</I>
<P>
The <I>unselect</I> action restores the text that was shown in
reverse to normal.
<P>
<I>cut</I> The <I>cut</I> action deletes the highlighted portion from
the text.
<P>
<I>self_insert</I>
<P>
The <I>self_insert</I> function inserts the key that was
pressed into the text. If the key is not a printable
key, it does nothing. If the key doesn't match the pat­
tern, it does nothing. If the callback <I>validate</I> returns
<I>XfwfReject</I>, it does nothing.
<P>
<DL>
<DT><I>bol</I> <DD>The <I>bol</I> action moves the cursor to the leftmost place­
holder.
<P>
</DD>
</DL>
<I>eol</I> The <I>eol</I> action moves the cursor to the end of the
label, if it isn't there already.
<P>
<I>left</I> The <I>left</I> action moves the cursor one position to the
left, unless there are no more placeholders in that
direction.
<P>
<I>right</I>
<P>
The <I>right</I> action moves the cursor one position to the
right, unless it is already at the end of the template.
<P>
<I>delete</I>
<P>
The <I>delete</I> action removes the character to the right of
the cursor, if there is any. The rest of the characters
in the same run will shift to the left.
<P>
<I>backspace</I>
<P>
The <I>backspace</I> action removes the character to the left
of the cursor, if there is any. The cursor moves left
and all characters in the same run move left.
<P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">NAME</A></LI>
<LI><A NAME="toc1" HREF="#sect1">DESCRIPTION</A></LI>
</UL>
</BODY></HTML>
